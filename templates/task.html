{% extends "base.html" %}
{% block content %}
<div class="task-detail card">
  <h2>{{ task.title }}</h2>
  <p class="muted">Created: {{ task.created_at[:10] }}</p>
  {% if task.due_date %}
    <p class="muted">Due date: {{ task.due_date }}</p>
  {% endif %}
  <div class="desc">{{ task.description }}</div>

  {% if task.attachment %}
    <div class="attachment">
      <p>Attachment:</p>
      {% set ext = task.attachment.rsplit('.',1)[-1].lower() %}
      {% if ext in ['mp3','wav','ogg','webm'] %}
        <audio controls src="{{ url_for('uploaded_file', filename=task.attachment) }}"></audio>
        <p><a href="{{ url_for('uploaded_file', filename=task.attachment) }}" target="_blank">Download</a></p>
      {% else %}
        <p><a href="{{ url_for('uploaded_file', filename=task.attachment) }}" target="_blank">Open attachment</a></p>
      {% endif %}
    </div>
  {% endif %}

  <p><a href="{{ url_for('index') }}">← Back</a></p>
</div>
{% endblock %}
